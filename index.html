<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNO Game</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            text-align: center;
            padding: 20px;
            margin: 0;
            color: #333;
        }

        h1 {
            font-size: 3rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .top-card {
            margin: 20px auto;
            padding: 20px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 20px;
            width: 200px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .hand {
            margin: 20px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            width: 80%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .card {
            display: inline-block;
            margin: 10px;
            padding: 15px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.2rem; /* Adjusted font size */
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
            width: 60px; /* Fixed width */
            height: 90px; /* Fixed height */
            text-align: center;
            line-height: 90px; /* Center text vertically */
            color: #000;
            overflow: hidden; /* Prevent text from overflowing */
            white-space: nowrap; /* Prevent text from wrapping */
            text-overflow: ellipsis; /* Add ellipsis if text overflows */
        }

        .card.RED {
            background: #ff4d4d;
            color: white;
        }

        .card.GREEN {
            background: #4dff4d;
            color: white;
        }

        .card.BLUE {
            background: #4d4dff;
            color: white;
        }

        .card.YELLOW {
            background: #ffff4d;
            color: black;
        }

        .card.Wild, .card.Draw4 {
            background: #333;
            color: white;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .button {
            padding: 10px 20px;
            margin: 10px;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .win-image {
            display: none;
            margin: 20px auto;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        #pc-info {
            margin: 20px auto;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            width: 80%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        #pc-info h2 {
            font-size: 1.5rem;
            color: #333;
        }

        #pc-info p {
            font-size: 1.2rem;
            color: #555;
        }

        .card-input {
            margin: 20px auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            width: 80%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .card-input input {
            padding: 10px;
            border: 2px solid #ccc;
            border-radius: 10px;
            font-size: 1rem;
            width: 60%;
            margin-right: 10px;
        }

        .card-input button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
        }

        .card-input button:hover {
            background: linear-gradient(135deg, #2575fc, #6a11cb);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <h1>Welcome to UNO!</h1>
    <h1 style="color: white;">This game was made by Will Baker and Quincey Buchanan</h1>

    <p>Finish your cards first to win.</p>

    <div class="top-card fade-in" id="top-card">
        Starting Card: <span id="top-card-display"></span>
    </div>

    <div class="hand fade-in" id="player-hand">
        <h2>Your Cards</h2>
        <div id="player-cards"></div>
    </div>

    <div class="card-input fade-in" id="card-input">
        <input type="number" id="card-index" placeholder="Enter card index (1, 2, 3...)" min="1">
        <button onclick="playSelectedCard()">Play Card</button>
    </div>

    <button class="button fade-in" id="pull-button">Pull</button>

    <div id="pc-info" class="fade-in">
        <h2>PC's Turn</h2>
        <p>PC has <span id="pc-cards-count"></span> cards remaining.</p>
    </div>

    <img src="nugget.png" alt="Winner" class="win-image fade-in" id="win-image">

    <script>
        const color = ['RED', 'GREEN', 'BLUE', 'YELLOW'];
        const rank = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'Skip', 'Reverse', 'Draw2', 'Draw4', 'Wild'];
        const ctype = {
            '0': 'number', '1': 'number', '2': 'number', '3': 'number', '4': 'number', '5': 'number', '6': 'number',
            '7': 'number', '8': 'number', '9': 'number', 'Skip': 'action', 'Reverse': 'action', 'Draw2': 'action',
            'Draw4': 'action_nocolor', 'Wild': 'action_nocolor'
        };

        class Card {
            constructor(color, rank) {
                this.rank = rank;
                if (ctype[rank] === 'number') {
                    this.color = color;
                    this.cardtype = 'number';
                } else if (ctype[rank] === 'action') {
                    this.color = color;
                    this.cardtype = 'action';
                } else {
                    this.color = null;
                    this.cardtype = 'action_nocolor';
                }
            }

            toString() {
                return this.color ? `${this.color} ${this.rank}` : this.rank;
            }

            getDisplayText() {
                return this.rank;
            }

            getColorClass() {
                return this.color || 'Wild';
            }
        }

        class Deck {
            constructor() {
                this.deck = [];
                for (let clr of color) {
                    for (let ran of rank) {
                        if (ctype[ran] !== 'action_nocolor') {
                            this.deck.push(new Card(clr, ran));
                            this.deck.push(new Card(clr, ran));
                        } else {
                            this.deck.push(new Card(clr, ran));
                        }
                    }
                }
            }

            shuffle() {
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }
            }

            deal() {
                return this.deck.pop();
            }
        }

        class Hand {
            constructor() {
                this.cards = [];
            }

            addCard(card) {
                this.cards.push(card);
            }

            removeCard(index) {
                return this.cards.splice(index, 1)[0];
            }

            getCards() {
                return this.cards;
            }

            getCard(index) {
                return this.cards[index];
            }

            getCardCount() {
                return this.cards.length;
            }
        }

        let deck, playerHand, pcHand, topCard, turn;

        function initializeGame() {
            deck = new Deck();
            deck.shuffle();

            playerHand = new Hand();
            for (let i = 0; i < 7; i++) {
                playerHand.addCard(deck.deal());
            }

            pcHand = new Hand();
            for (let i = 0; i < 7; i++) {
                pcHand.addCard(deck.deal());
            }

            topCard = deck.deal();
            while (topCard.cardtype !== 'number') {
                topCard = deck.deal();
            }

            turn = Math.random() < 0.5 ? 'Player' : 'PC';

            updateUI();
        }

        function updateUI() {
            document.getElementById('top-card-display').textContent = topCard.getDisplayText();
            document.getElementById('top-card-display').className = `card ${topCard.getColorClass()}`;
            document.getElementById('pc-cards-count').textContent = pcHand.getCardCount();

            const playerCardsDiv = document.getElementById('player-cards');
            playerCardsDiv.innerHTML = '';
            playerHand.getCards().forEach((card, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = `card ${card.getColorClass()}`;
                cardDiv.textContent = card.getDisplayText();
                cardDiv.onclick = () => playCard(index);
                playerCardsDiv.appendChild(cardDiv);
            });

            if (turn === 'PC') {
                setTimeout(pcTurn, 1000);
            }
        }

        function playSelectedCard() {
            const index = parseInt(document.getElementById('card-index').value) - 1;
            if (index >= 0 && index < playerHand.getCardCount()) {
                playCard(index);
            } else {
                alert('Invalid card index!');
            }
        }

        function playCard(index) {
            const card = playerHand.getCard(index);
            if (isValidCard(card)) {
                playerHand.removeCard(index);
                topCard = card;
                applyCardEffect(card);
                if (playerHand.getCardCount() === 0) {
                    endGame('Player');
                    return;
                }
                turn = 'PC';
                updateUI();
            } else {
                alert('Invalid card!');
            }
        }

        function isValidCard(card) {
            return card.color === topCard.color || card.rank === topCard.rank || card.cardtype === 'action_nocolor';
        }

        function applyCardEffect(card) {
            if (card.rank === 'Skip') {
                turn = 'Player';
            } else if (card.rank === 'Reverse') {
                turn = 'Player';
            } else if (card.rank === 'Draw2') {
                for (let i = 0; i < 2; i++) {
                    pcHand.addCard(deck.deal());
                }
                turn = 'Player';
            } else if (card.rank === 'Draw4') {
                for (let i = 0; i < 4; i++) {
                    pcHand.addCard(deck.deal());
                }
                const newColor = prompt('Change color to (RED, GREEN, BLUE, YELLOW):').toUpperCase();
                topCard.color = newColor;
                turn = 'Player';
            } else if (card.rank === 'Wild') {
                const newColor = prompt('Change color to (RED, GREEN, BLUE, YELLOW):').toUpperCase();
                topCard.color = newColor;
                turn = 'PC';
            }
        }

        function pcTurn() {
            let playedCard = null;
            for (let i = 0; i < pcHand.getCardCount(); i++) {
                const card = pcHand.getCard(i);
                if (isValidCard(card)) {
                    playedCard = pcHand.removeCard(i);
                    break;
                }
            }

            if (playedCard) {
                topCard = playedCard;
                applyCardEffect(playedCard);
                if (pcHand.getCardCount() === 0) {
                    endGame('PC');
                    return;
                }
            } else {
                pcHand.addCard(deck.deal());
            }

            turn = 'Player';
            updateUI();
        }

        function endGame(winner) {
            if (winner === 'Player') {
                document.getElementById('win-image').style.display = 'block';
            }
            alert(`${winner} wins!`);
            initializeGame();
        }

        document.getElementById('pull-button').onclick = () => {
            const card = deck.deal();
            playerHand.addCard(card);
            if (!isValidCard(card)) {
                turn = 'PC';
            }
            updateUI();
        };

        initializeGame();
    </script>
</body>
</html>